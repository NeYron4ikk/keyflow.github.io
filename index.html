<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>KeyFlow</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&family=Space+Mono:wght@400;700&display=swap');

  :root {
    --bg: #0a0a0f;
    --surface: #111118;
    --surface2: #1a1a24;
    --border: #2a2a3a;
    --accent: #6c63ff;
    --accent2: #ff6584;
    --accent3: #43e97b;
    --text: #f0f0ff;
    --text2: #8888aa;
    --card-glow: rgba(108,99,255,0.15);
    --radius: 18px;
  }

  * { margin:0; padding:0; box-sizing:border-box; -webkit-tap-highlight-color:transparent; }

  body {
    font-family: 'Manrope', sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    overflow-x: hidden;
    padding-bottom: 80px;
  }

  body::before {
    content:'';
    position:fixed; top:-50%; left:-50%; width:200%; height:200%;
    background:
      radial-gradient(ellipse at 20% 20%, rgba(108,99,255,0.08) 0%, transparent 50%),
      radial-gradient(ellipse at 80% 80%, rgba(255,101,132,0.06) 0%, transparent 50%),
      radial-gradient(ellipse at 50% 50%, rgba(67,233,123,0.04) 0%, transparent 60%);
    pointer-events:none; z-index:0;
  }

  .page { position:relative; z-index:1; }
  .page-hidden { display:none !important; }

  /* HEADER */
  .header {
    position:sticky; top:0; z-index:100;
    padding:16px 20px 12px;
    background:rgba(10,10,15,0.9);
    backdrop-filter:blur(20px);
    border-bottom:1px solid var(--border);
  }
  .header-top { display:flex; align-items:center; justify-content:space-between; margin-bottom:14px; }
  .logo { display:flex; align-items:center; gap:10px; }
  .logo-icon {
    width:40px; height:40px;
    background:linear-gradient(135deg,var(--accent),var(--accent2));
    border-radius:10px; display:flex; align-items:center; justify-content:center;
    box-shadow:0 4px 15px rgba(108,99,255,0.4);
  }
  .logo-text {
    font-size:20px; font-weight:800; letter-spacing:-0.5px;
    background:linear-gradient(135deg,#fff,var(--accent));
    -webkit-background-clip:text; -webkit-text-fill-color:transparent;
  }
  .user-badge {
    background:var(--surface2); border:1px solid var(--border);
    border-radius:20px; padding:6px 12px; font-size:13px; font-weight:600;
    color:var(--text2); display:flex; align-items:center; gap:6px;
  }
  .categories { display:flex; gap:8px; overflow-x:auto; scrollbar-width:none; padding:2px 0; }
  .categories::-webkit-scrollbar { display:none; }
  .cat-btn {
    flex-shrink:0; padding:7px 16px; border-radius:20px;
    border:1px solid var(--border); background:transparent;
    color:var(--text2); font-family:'Manrope',sans-serif;
    font-size:13px; font-weight:600; cursor:pointer; transition:all 0.2s; white-space:nowrap;
  }
  .cat-btn.active { background:var(--accent); border-color:var(--accent); color:white; box-shadow:0 4px 15px rgba(108,99,255,0.35); }

  /* HERO */
  .hero {
    margin:20px 16px 0;
    background:linear-gradient(135deg,#1a1a35 0%,#0f0f20 100%);
    border:1px solid var(--border); border-radius:var(--radius);
    padding:24px 20px; position:relative; overflow:hidden;
  }
  .hero::before {
    content:''; position:absolute; top:-40px; right:-40px;
    width:160px; height:160px;
    background:radial-gradient(circle,rgba(108,99,255,0.3) 0%,transparent 70%);
    border-radius:50%;
  }
  .hero-badge {
    display:inline-flex; align-items:center; gap:6px;
    background:rgba(108,99,255,0.15); border:1px solid rgba(108,99,255,0.3);
    border-radius:20px; padding:4px 12px; font-size:12px; font-weight:700;
    color:#a89cff; margin-bottom:12px; letter-spacing:0.5px; text-transform:uppercase;
  }
  .hero-title { font-size:22px; font-weight:800; line-height:1.2; margin-bottom:8px; }
  .hero-title span { background:linear-gradient(135deg,var(--accent),var(--accent2)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
  .hero-sub { font-size:14px; color:var(--text2); line-height:1.5; }
  .hero-stats { display:flex; gap:20px; margin-top:20px; padding-top:16px; border-top:1px solid var(--border); }
  .stat { display:flex; flex-direction:column; gap:2px; }
  .stat-num { font-size:20px; font-weight:800; font-family:'Space Mono',monospace; color:var(--accent); }
  .stat-label { font-size:11px; color:var(--text2); font-weight:600; text-transform:uppercase; letter-spacing:0.5px; }

  /* SECTION */
  .section-title {
    font-size:18px; font-weight:800; margin:28px 16px 14px;
    display:flex; align-items:center; gap:8px; color:var(--text);
  }
  .section-title::after { content:''; flex:1; height:1px; background:var(--border); margin-left:8px; }

  /* SERVICE CARDS */
  .services-grid { padding:0 16px; display:flex; flex-direction:column; gap:12px; }
  .service-card {
    background:var(--surface); border:1px solid var(--border);
    border-radius:var(--radius); padding:18px; cursor:pointer;
    transition:all 0.25s cubic-bezier(0.4,0,0.2,1);
    animation:fadeIn 0.4s ease both;
  }
  .service-card:nth-child(1){animation-delay:0.05s}
  .service-card:nth-child(2){animation-delay:0.1s}
  .service-card:nth-child(3){animation-delay:0.15s}
  .service-card:nth-child(4){animation-delay:0.2s}
  .service-card:nth-child(5){animation-delay:0.25s}
  .service-card:nth-child(6){animation-delay:0.3s}
  .service-card:active { transform:scale(0.98); }
  .card-header { display:flex; align-items:center; gap:14px; margin-bottom:12px; }
  .card-emoji {
    width:52px; height:52px; border-radius:14px;
    display:flex; align-items:center; justify-content:center; flex-shrink:0;
  }
  .card-emoji svg { display:block; }
  .card-info { flex:1; }
  .card-name { font-size:16px; font-weight:700; margin-bottom:3px; }
  .card-desc { font-size:13px; color:var(--text2); line-height:1.4; }
  .card-price { text-align:right; flex-shrink:0; }
  .price-from { font-size:11px; color:var(--text2); font-weight:600; text-transform:uppercase; letter-spacing:0.5px; }
  .price-value { font-size:20px; font-weight:800; font-family:'Space Mono',monospace; color:var(--accent); }
  .card-variants { display:flex; gap:8px; flex-wrap:wrap; }
  .variant-chip {
    background:var(--surface2); border:1px solid var(--border);
    border-radius:20px; padding:6px 14px; font-size:13px; font-weight:600;
    color:var(--text2); cursor:pointer; transition:all 0.2s;
    display:flex; align-items:center; gap:6px;
  }
  .variant-chip:active, .variant-chip.selected { background:var(--accent); border-color:var(--accent); color:white; }
  .variant-price { font-family:'Space Mono',monospace; font-size:12px; opacity:0.75; }

  /* SERVICE LOGO COLORS */
  .color-spotify { background:#1DB954; }
  .color-youtube { background:#FF0000; }
  .color-chatgpt { background:#10a37f; }
  .color-netflix { background:#E50914; }
  .color-steam   { background:#1b2838; }
  .color-discord { background:#5865F2; }
  .color-roblox     { background: #e2231a; }
  .color-brawlstars { background: linear-gradient(135deg, #FFD700, #FF8C00); }

  /* Custom amount input */
  .custom-amount-wrap {
    display: flex; gap: 8px; align-items: center; flex-wrap: wrap;
  }
  .custom-amount-input {
    flex: 1; min-width: 120px;
    background: var(--surface2); border: 1px solid var(--border);
    border-radius: 12px; padding: 9px 14px;
    font-family: 'Space Mono', monospace; font-size: 15px; font-weight: 700;
    color: var(--text); outline: none; transition: border-color 0.2s;
  }
  .custom-amount-input:focus { border-color: var(--accent); }
  .custom-amount-input::placeholder { color: var(--text2); font-weight: 400; font-family: 'Manrope', sans-serif; }
  .custom-amount-label {
    font-size: 13px; color: var(--text2); font-weight: 600;
    white-space: nowrap;
  }
  .btn-custom-select {
    background: var(--accent); border: none; border-radius: 12px;
    padding: 9px 18px; font-family: 'Manrope', sans-serif;
    font-size: 13px; font-weight: 700; color: white; cursor: pointer;
    transition: all 0.2s; white-space: nowrap;
  }
  .btn-custom-select:active { transform: scale(0.96); }

  /* BOTTOM ORDER BAR */
  .bottom-bar {
    position:fixed; bottom:0; left:0; right:0;
    background:rgba(10,10,15,0.97);
    backdrop-filter:blur(20px);
    border-top:1px solid var(--border);
    padding:12px 16px; z-index:100;
    display:flex; gap:10px;
    transform:translateY(100%);
    transition:transform 0.3s cubic-bezier(0.4,0,0.2,1);
  }
  .bottom-bar.visible { transform:translateY(0); }
  .order-info { flex:1; display:flex; flex-direction:column; justify-content:center; }
  .order-name { font-size:13px; color:var(--text2); font-weight:600; }
  .order-total { font-size:18px; font-weight:800; font-family:'Space Mono',monospace; }
  .btn-order {
    background:linear-gradient(135deg,var(--accent),#8b5cf6);
    border:none; border-radius:14px; padding:14px 24px;
    font-family:'Manrope',sans-serif; font-size:15px; font-weight:700;
    color:white; cursor:pointer; box-shadow:0 4px 20px rgba(108,99,255,0.4);
    transition:all 0.2s; white-space:nowrap;
  }
  .btn-order:active { transform:scale(0.96); }

  /* MODALS */
  .modal-overlay {
    position:fixed; inset:0; background:rgba(0,0,0,0.75);
    z-index:200; display:flex; align-items:flex-end;
    opacity:0; pointer-events:none; transition:opacity 0.3s;
  }
  .modal-overlay.open { opacity:1; pointer-events:all; }
  .modal {
    background:var(--surface); border-radius:var(--radius) var(--radius) 0 0;
    border:1px solid var(--border); border-bottom:none;
    padding:8px 20px 36px; width:100%;
    transform:translateY(100%);
    transition:transform 0.35s cubic-bezier(0.4,0,0.2,1);
  }
  .modal-overlay.open .modal { transform:translateY(0); }
  .modal-handle { width:36px; height:4px; background:var(--border); border-radius:2px; margin:12px auto 20px; }
  .modal-title { font-size:20px; font-weight:800; margin-bottom:6px; }
  .modal-sub { font-size:14px; color:var(--text2); margin-bottom:24px; line-height:1.5; }

  /* PAYMENT OPTIONS */
  .payment-options { display:flex; flex-direction:column; gap:10px; }
  .pay-btn {
    display:flex; align-items:center; gap:14px;
    background:var(--surface2); border:1px solid var(--border);
    border-radius:14px; padding:16px; cursor:pointer;
    transition:all 0.2s; width:100%; text-align:left;
  }
  .pay-btn:active { transform:scale(0.98); border-color:var(--accent); background:rgba(108,99,255,0.1); }
  .pay-icon { width:44px; height:44px; border-radius:12px; display:flex; align-items:center; justify-content:center; font-size:22px; flex-shrink:0; }
  .pay-info { flex:1; }
  .pay-name { font-size:15px; font-weight:700; }
  .pay-desc { font-size:13px; color:var(--text2); margin-top:2px; }
  .pay-arrow { font-size:22px; color:var(--text2); }

  /* SBP DETAILS SCREEN */
  .sbp-details {
    background:var(--surface2); border:1px solid var(--border);
    border-radius:14px; padding:20px; margin-bottom:16px;
  }
  .sbp-row { display:flex; justify-content:space-between; align-items:center; padding:10px 0; border-bottom:1px solid var(--border); }
  .sbp-row:last-child { border-bottom:none; }
  .sbp-label { font-size:13px; color:var(--text2); font-weight:600; }
  .sbp-value { font-size:14px; font-weight:700; font-family:'Space Mono',monospace; }
  .copy-btn {
    background:rgba(108,99,255,0.15); border:1px solid rgba(108,99,255,0.3);
    border-radius:8px; padding:4px 10px; font-size:12px; font-weight:700;
    color:var(--accent); cursor:pointer; transition:all 0.2s;
  }
  .copy-btn:active { background:var(--accent); color:white; }

  .amount-highlight {
    background:linear-gradient(135deg,rgba(108,99,255,0.2),rgba(255,101,132,0.1));
    border:1px solid rgba(108,99,255,0.3);
    border-radius:12px; padding:16px; text-align:center; margin-bottom:16px;
  }
  .amount-big { font-size:32px; font-weight:800; font-family:'Space Mono',monospace; color:var(--accent); }
  .amount-label { font-size:13px; color:var(--text2); margin-top:4px; }

  .btn-primary {
    width:100%; background:linear-gradient(135deg,var(--accent),#8b5cf6);
    border:none; border-radius:14px; padding:16px;
    font-family:'Manrope',sans-serif; font-size:16px; font-weight:700;
    color:white; cursor:pointer; box-shadow:0 4px 20px rgba(108,99,255,0.35);
    transition:all 0.2s; margin-top:8px;
  }
  .btn-primary:active { transform:scale(0.98); }

  .btn-secondary {
    width:100%; background:transparent;
    border:1px solid var(--border); border-radius:14px; padding:14px;
    font-family:'Manrope',sans-serif; font-size:15px; font-weight:600;
    color:var(--text2); cursor:pointer; transition:all 0.2s; margin-top:8px;
  }
  .btn-secondary:active { border-color:var(--accent); color:var(--accent); }

  /* TIMER */
  .timer-bar {
    background:var(--surface2); border:1px solid var(--border);
    border-radius:12px; padding:12px 16px;
    display:flex; align-items:center; gap:10px; margin-bottom:16px;
  }
  .timer-dot { width:8px; height:8px; border-radius:50%; background:var(--accent3); animation:pulse 1.5s infinite; }
  @keyframes pulse { 0%,100%{opacity:1}50%{opacity:0.3} }
  .timer-text { font-size:13px; color:var(--text2); }
  .timer-count { font-family:'Space Mono',monospace; font-weight:700; color:var(--text); }

  /* SUCCESS / WAITING SCREEN */
  .status-screen { text-align:center; padding:20px 0; }
  .status-icon { font-size:64px; margin-bottom:16px; display:block; }
  .status-title { font-size:22px; font-weight:800; margin-bottom:8px; }
  .status-desc { font-size:14px; color:var(--text2); line-height:1.6; }

  /* ORDERS PAGE */
  .orders-list { padding:0 16px; display:flex; flex-direction:column; gap:10px; }
  .order-card { background:var(--surface); border:1px solid var(--border); border-radius:14px; padding:16px; }
  .order-row { display:flex; justify-content:space-between; align-items:center; }
  .order-service { font-size:15px; font-weight:700; }
  .order-date { font-size:12px; color:var(--text2); }
  .status-badge { padding:4px 10px; border-radius:20px; font-size:12px; font-weight:700; }
  .status-completed { background:rgba(67,233,123,0.15); color:var(--accent3); }
  .status-pending { background:rgba(255,193,7,0.15); color:#ffc107; }
  .status-processing { background:rgba(108,99,255,0.15); color:var(--accent); }
  .status-cancelled { background:rgba(255,101,132,0.15); color:var(--accent2); }

  /* NAV */
  .nav {
    position:fixed; bottom:0; left:0; right:0;
    background:rgba(10,10,15,0.97); backdrop-filter:blur(20px);
    border-top:1px solid var(--border); display:flex; z-index:99;
  }
  .nav-btn {
    flex:1; display:flex; flex-direction:column; align-items:center;
    gap:4px; padding:10px 0 14px; background:none; border:none;
    cursor:pointer; color:var(--text2); font-family:'Manrope',sans-serif;
    font-size:11px; font-weight:600; transition:color 0.2s;
  }
  .nav-btn svg { transition:transform 0.2s; }
  .nav-btn.active { color:var(--accent); }
  .nav-btn.active svg { transform:translateY(-1px); }

  /* TOAST */
  .toast {
    position:fixed; top:20px; left:50%; transform:translateX(-50%) translateY(-80px);
    background:#1a1a24; border:1px solid var(--accent); border-radius:12px;
    padding:10px 20px; font-size:14px; font-weight:600; color:var(--accent);
    z-index:999; transition:transform 0.3s cubic-bezier(0.4,0,0.2,1);
    white-space:nowrap;
  }
  .toast.show { transform:translateX(-50%) translateY(0); }

  @keyframes fadeIn { from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)} }

  .empty-state { text-align:center; padding:60px 20px; color:var(--text2); }
  .empty-state .icon { font-size:48px; margin-bottom:12px; }
  .empty-state .title { font-size:18px; font-weight:700; color:var(--text); }
  .empty-state .desc { font-size:14px; margin-top:8px; }

  .divider { height:1px; background:var(--border); margin:16px 0; }
  .info-note {
    background:rgba(108,99,255,0.08); border:1px solid rgba(108,99,255,0.2);
    border-radius:12px; padding:12px 16px; font-size:13px; color:var(--text2);
    line-height:1.5; margin-bottom:16px;
  }
  .info-note strong { color:var(--text); }
</style>
</head>
<body>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê CATALOG PAGE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="page-catalog" class="page">
  <div class="header">
    <div class="header-top">
      <div class="logo">
        <div class="logo-icon">
          <svg width="22" height="22" viewBox="0 0 100 120" fill="none">
            <line x1="50" y1="62" x2="50" y2="105" stroke="white" stroke-width="6" stroke-linecap="round"/>
            <line x1="50" y1="82" x2="62" y2="82" stroke="white" stroke-width="6" stroke-linecap="round"/>
            <line x1="50" y1="95" x2="62" y2="95" stroke="white" stroke-width="6" stroke-linecap="round"/>
            <circle cx="50" cy="42" r="20" stroke="white" stroke-width="6" fill="none"/>
            <path d="M44 46 Q50 40 56 46" stroke="white" stroke-width="3.5" stroke-linecap="round" fill="none"/>
            <path d="M40 50 Q50 36 60 50" stroke="white" stroke-width="3.5" stroke-linecap="round" fill="none"/>
            <circle cx="50" cy="49" r="2.5" fill="white"/>
            <path d="M20 28 Q18 10 50 8 Q82 6 82 30" stroke="white" stroke-width="4" stroke-linecap="round" fill="none" opacity="0.85"/>
            <polyline points="76,22 82,30 90,26" stroke="white" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" fill="none" opacity="0.85"/>
          </svg>
        </div>
        <div class="logo-text">KeyFlow</div>
      </div>
      <div class="user-badge" id="user-badge">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.7 0 4.8-2.1 4.8-4.8S14.7 2.4 12 2.4 7.2 4.5 7.2 7.2 9.3 12 12 12zm0 2.4c-3.2 0-9.6 1.6-9.6 4.8v2.4h19.2v-2.4c0-3.2-6.4-4.8-9.6-4.8z"/></svg>
        –ì–æ—Å—Ç—å
      </div>
    </div>
    <div class="categories">
      <button class="cat-btn active" data-cat="all">–í—Å–µ</button>
      <button class="cat-btn" data-cat="music">üéµ –ú—É–∑—ã–∫–∞</button>
      <button class="cat-btn" data-cat="video">üé¨ –í–∏–¥–µ–æ</button>
      <button class="cat-btn" data-cat="ai">ü§ñ –ò–ò</button>
      <button class="cat-btn" data-cat="games">üéÆ –ò–≥—Ä—ã</button>
    </div>
  </div>

  <div class="hero">
    <div class="hero-badge">‚ö° –ë—ã—Å—Ç—Ä–∞—è –≤—ã–¥–∞—á–∞</div>
    <div class="hero-title"><span>KeyFlow</span> ‚Äî –∑–∞—Ä—É–±–µ–∂–Ω—ã–µ<br>–ø–æ–¥–ø–∏—Å–∫–∏ –∏–∑ –†–æ—Å—Å–∏–∏</div>
    <div class="hero-sub">–û–ø–ª–∞—á–∏–≤–∞–π —á–µ—Ä–µ–∑ –°–ë–ü, –∫–∞—Ä—Ç—É –∏–ª–∏ –∫—Ä–∏–ø—Ç—É ‚Äî –ø–æ–ª—É—á–∞–π –∑–∞ 15 –º–∏–Ω—É—Ç</div>
    <div class="hero-stats">
      <div class="stat"><div class="stat-num">1200+</div><div class="stat-label">–ö–ª–∏–µ–Ω—Ç–æ–≤</div></div>
      <div class="stat"><div class="stat-num">15–º–∏–Ω</div><div class="stat-label">–í—ã–¥–∞—á–∞</div></div>
      <div class="stat"><div class="stat-num">100%</div><div class="stat-label">–ì–∞—Ä–∞–Ω—Ç–∏—è</div></div>
    </div>
  </div>

  <div class="section-title">üî• –ü–æ–ø—É–ª—è—Ä–Ω–æ–µ</div>
  <div class="services-grid" id="services-grid"></div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê ORDERS PAGE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="page-orders" class="page page-hidden">
  <div class="header">
    <div class="header-top">
      <div class="logo">
        <div class="logo-icon" style="background:linear-gradient(135deg,#43e97b,#38f9d7)">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="white"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14l-5-5 1.4-1.4L12 14.2l7.6-7.6L21 8l-9 9z"/></svg>
        </div>
        <div class="logo-text">–ú–æ–∏ –∑–∞–∫–∞–∑—ã</div>
      </div>
    </div>
  </div>
  <div id="orders-content" style="padding-top:16px;"></div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê BOTTOM BAR ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="bottom-bar" id="bottom-bar">
  <div class="order-info">
    <div class="order-name" id="bar-name">–í—ã–±—Ä–∞–Ω–æ</div>
    <div class="order-total" id="bar-price">0‚ÇΩ</div>
  </div>
  <button class="btn-order" id="btn-order">–û—Ñ–æ—Ä–º–∏—Ç—å ‚Üí</button>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODAL: –í–´–ë–û–† –û–ü–õ–ê–¢–´ ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="modal-overlay" id="modal-pay-select">
  <div class="modal">
    <div class="modal-handle"></div>
    <div class="modal-title">–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</div>
    <div class="modal-sub" id="pay-select-sub">–í—ã–±–µ—Ä–∏ —É–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–±</div>
    <div class="payment-options">
      <button class="pay-btn" id="pay-sbp-btn">
        <div class="pay-icon" style="background:linear-gradient(135deg,#0070f3,#0050c0)">üè¶</div>
        <div class="pay-info">
          <div class="pay-name">–°–ë–ü ‚Äî –ë—ã—Å—Ç—Ä—ã–π –ø–ª–∞—Ç—ë–∂</div>
          <div class="pay-desc">–¢–∏–Ω—å–∫–æ—Ñ—Ñ, –°–±–µ—Ä, –ª—é–±–æ–π –±–∞–Ω–∫ –†–§</div>
        </div>
        <div class="pay-arrow">‚Ä∫</div>
      </button>
      <button class="pay-btn" id="pay-card-btn">
        <div class="pay-icon" style="background:linear-gradient(135deg,#8b5cf6,#6d28d9)">üí≥</div>
        <div class="pay-info">
          <div class="pay-name">–ö–∞—Ä—Ç–∞ –†–§ (–Æ–ö–∞—Å—Å–∞)</div>
          <div class="pay-desc">Visa, Mastercard, –ú–∏—Ä</div>
        </div>
        <div class="pay-arrow">‚Ä∫</div>
      </button>
      <button class="pay-btn" id="pay-crypto-btn">
        <div class="pay-icon" style="background:linear-gradient(135deg,#f7931a,#c67421)">‚Çø</div>
        <div class="pay-info">
          <div class="pay-name">–ö—Ä–∏–ø—Ç–∞ (USDT / TON)</div>
          <div class="pay-desc">CryptoBot ¬∑ –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ</div>
        </div>
        <div class="pay-arrow">‚Ä∫</div>
      </button>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODAL: –°–ë–ü –†–ï–ö–í–ò–ó–ò–¢–´ ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="modal-overlay" id="modal-sbp">
  <div class="modal">
    <div class="modal-handle"></div>
    <div class="modal-title">–û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ –°–ë–ü</div>

    <div class="amount-highlight">
      <div class="amount-big" id="sbp-amount">0‚ÇΩ</div>
      <div class="amount-label">–ü–µ—Ä–µ–≤–µ–¥–∏ —Ä–æ–≤–Ω–æ —ç—Ç—É —Å—É–º–º—É</div>
    </div>

    <div class="timer-bar">
      <div class="timer-dot"></div>
      <div class="timer-text">–í—Ä–µ–º—è –Ω–∞ –æ–ø–ª–∞—Ç—É: <span class="timer-count" id="sbp-timer">15:00</span></div>
    </div>

    <div class="sbp-details">
      <div class="sbp-row">
        <span class="sbp-label">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</span>
        <div style="display:flex;align-items:center;gap:8px;">
          <span class="sbp-value" id="sbp-phone">+7 900 123-45-67</span>
          <button class="copy-btn" onclick="copyText('sbp-phone')">–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
        </div>
      </div>
      <div class="sbp-row">
        <span class="sbp-label">–ë–∞–Ω–∫</span>
        <span class="sbp-value" id="sbp-bank">–¢–∏–Ω—å–∫–æ—Ñ—Ñ</span>
      </div>
      <div class="sbp-row">
        <span class="sbp-label">–ü–æ–ª—É—á–∞—Ç–µ–ª—å</span>
        <span class="sbp-value" id="sbp-recipient">–ò–≤–∞–Ω –ò.</span>
      </div>
      <div class="sbp-row">
        <span class="sbp-label">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</span>
        <div style="display:flex;align-items:center;gap:8px;">
          <span class="sbp-value" id="sbp-comment">#1234</span>
          <button class="copy-btn" onclick="copyText('sbp-comment')">–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
        </div>
      </div>
    </div>

    <div class="info-note">
      ‚ö†Ô∏è <strong>–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ</strong> —É–∫–∞–∂–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –ø–µ—Ä–µ–≤–æ–¥—É ‚Äî —ç—Ç–æ –Ω–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞. –ë–µ–∑ –Ω–µ–≥–æ –º—ã –Ω–µ —Å–º–æ–∂–µ–º –Ω–∞–π—Ç–∏ —Ç–≤–æ–π –ø–ª–∞—Ç—ë–∂.
    </div>

    <button class="btn-primary" id="sbp-paid-btn">‚úÖ –Ø –æ–ø–ª–∞—Ç–∏–ª ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
    <button class="btn-secondary" onclick="closeModal('modal-sbp'); openModal('modal-pay-select')">‚Üê –ù–∞–∑–∞–¥</button>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODAL: –û–ñ–ò–î–ê–ù–ò–ï –û–ü–õ–ê–¢–´ ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="modal-overlay" id="modal-waiting">
  <div class="modal">
    <div class="modal-handle"></div>
    <div class="status-screen">
      <span class="status-icon">‚è≥</span>
      <div class="status-title">–ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–ø–ª–∞—Ç—É...</div>
      <div class="status-desc">–û–±—ã—á–Ω–æ —ç—Ç–æ –∑–∞–Ω–∏–º–∞–µ—Ç 1‚Äì2 –º–∏–Ω—É—Ç—ã.<br>–ù–µ –∑–∞–∫—Ä—ã–≤–∞–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.</div>
    </div>
    <div style="margin-top:24px;">
      <button class="btn-secondary" id="waiting-cancel-btn">–û—Ç–º–µ–Ω–∏—Ç—å</button>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODAL: –£–°–ü–ï–®–ù–ê–Ø –û–ü–õ–ê–¢–ê ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="modal-overlay" id="modal-success">
  <div class="modal">
    <div class="modal-handle"></div>
    <div class="status-screen">
      <span class="status-icon">üéâ</span>
      <div class="status-title">–ó–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç!</div>
      <div class="status-desc" id="success-desc">
        –û–ø–ª–∞—Ç–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞.<br>–î–∞–Ω–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏ –ø—Ä–∏–¥—É—Ç –≤ –±–æ—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ 15 –º–∏–Ω—É—Ç.
      </div>
    </div>
    <div style="margin-top:24px;">
      <button class="btn-primary" onclick="closeModal('modal-success'); showPage('orders')">–ú–æ–∏ –∑–∞–∫–∞–∑—ã ‚Üí</button>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODAL: –ö–†–ò–ü–¢–ê ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="modal-overlay" id="modal-crypto">
  <div class="modal">
    <div class="modal-handle"></div>
    <div class="modal-title">–û–ø–ª–∞—Ç–∞ –∫—Ä–∏–ø—Ç–æ–π</div>

    <div class="amount-highlight">
      <div class="amount-big" id="crypto-amount-usdt">0 USDT</div>
      <div class="amount-label" id="crypto-amount-rub">‚âà 0‚ÇΩ</div>
    </div>

    <div class="info-note">
      üíé –ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è <strong>@CryptoBot</strong> —Å –≥–æ—Ç–æ–≤—ã–º –∏–Ω–≤–æ–π—Å–æ–º. –û–ø–ª–∞—Ç–∏ —Ç–∞–º –∏ –≤–µ—Ä–Ω–∏—Å—å —Å—é–¥–∞.
    </div>

    <button class="btn-primary" id="crypto-open-btn">–û—Ç–∫—Ä—ã—Ç—å CryptoBot ‚Üí</button>
    <button class="btn-primary" id="crypto-check-btn" style="background:linear-gradient(135deg,#43e97b,#38f9d7);margin-top:10px;box-shadow:0 4px 20px rgba(67,233,123,0.3);">‚úÖ –Ø –æ–ø–ª–∞—Ç–∏–ª ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
    <button class="btn-secondary" onclick="closeModal('modal-crypto'); openModal('modal-pay-select')">‚Üê –ù–∞–∑–∞–¥</button>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODAL: –ö–ê–†–¢–ê (–Æ–ö–ê–°–°–ê) ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="modal-overlay" id="modal-card">
  <div class="modal">
    <div class="modal-handle"></div>
    <div class="modal-title">–û–ø–ª–∞—Ç–∞ –∫–∞—Ä—Ç–æ–π</div>
    <div class="modal-sub" id="card-modal-sub">–û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ –Æ–ö–∞—Å—Å–∞</div>

    <div class="info-note">
      üîí –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ <strong>–Æ–ö–∞—Å—Å–∞</strong>. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –∫–∞—Ä—Ç—ã Visa, Mastercard, –ú–∏—Ä –∏ SberPay.
    </div>

    <button class="btn-primary" id="card-pay-btn">–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–ø–ª–∞—Ç–µ ‚Üí</button>
    <button class="btn-secondary" onclick="closeModal('modal-card'); openModal('modal-pay-select')">‚Üê –ù–∞–∑–∞–¥</button>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê TOAST ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="toast" id="toast">‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê NAVIGATION ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<nav class="nav" id="main-nav">
  <button class="nav-btn active" id="nav-catalog" onclick="showPage('catalog')">
    <svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor"><path d="M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z"/></svg>
    –ö–∞—Ç–∞–ª–æ–≥
  </button>
  <button class="nav-btn" id="nav-orders" onclick="showPage('orders')">
    <svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14l-5-5 1.4-1.4L12 14.2l7.6-7.6L21 8l-9 9z"/></svg>
    –ó–∞–∫–∞–∑—ã
  </button>
</nav>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// TELEGRAM INIT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const tg = window.Telegram?.WebApp;
if (tg) {
  tg.ready();
  tg.expand();
  tg.setHeaderColor('#0a0a0f');
  tg.setBackgroundColor('#0a0a0f');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// CONFIG ‚Äî –≠–¢–ò –î–ê–ù–ù–´–ï –ó–ê–ü–û–õ–ù–ò –í .env –ë–û–¢–ê
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const CONFIG = {
  SBP_PHONE:     '+7 900 123-45-67',   // ‚Üê —Ç–≤–æ–π –Ω–æ–º–µ—Ä
  SBP_BANK:      '–¢–∏–Ω—å–∫–æ—Ñ—Ñ',            // ‚Üê —Ç–≤–æ–π –±–∞–Ω–∫
  SBP_RECIPIENT: '–ò–≤–∞–Ω –ò.',             // ‚Üê —Ç–≤–æ—ë –∏–º—è
  USDT_RATE:     90,                    // ‚Üê –∫—É—Ä—Å RUB/USDT (–æ–±–Ω–æ–≤–ª—è–π —Ä–∞–∑ –≤ –¥–µ–Ω—å)
  CRYPTO_BOT_URL: 'https://t.me/CryptoBot', // ‚Üê —Å—Å—ã–ª–∫–∞ –∏–Ω–≤–æ–π—Å–∞ –ø—Ä–∏–¥—ë—Ç –∏–∑ –±–æ—Ç–∞
  YOOKASSA_URL:  '',                    // ‚Üê –∑–∞–ø–æ–ª–Ω–∏—Ç –±–æ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏
};

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SERVICES DATA
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const LOGOS = {
  spotify:`<svg viewBox="0 0 24 24" width="28" height="28" fill="white"><path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"/></svg>`,
  roblox:`<svg viewBox="0 0 24 24" width="26" height="26" fill="white"><path d="M4.597 0L0 19.403 19.395 24 24 4.597zm10.271 13.073l-3.965-1.06 1.06-3.965 3.965 1.06z"/></svg>`,
  brawlstars:`<svg viewBox="0 0 200 200" width="28" height="28"><defs><linearGradient id="bsGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#FFD700"/><stop offset="100%" style="stop-color:#FF8C00"/></linearGradient></defs><rect width="200" height="200" rx="40" fill="url(#bsGrad)"/><text x="100" y="148" font-size="130" text-anchor="middle" font-family="Arial Black,sans-serif" font-weight="900" fill="#1a1a2e">B!</text></svg>`,
  chatgpt:`<svg viewBox="0 0 24 24" width="26" height="26" fill="white"><path d="M22.282 9.821a5.985 5.985 0 0 0-.516-4.91 6.046 6.046 0 0 0-6.51-2.9A6.065 6.065 0 0 0 4.981 4.18a5.985 5.985 0 0 0-3.998 2.9 6.046 6.046 0 0 0 .743 7.097 5.98 5.98 0 0 0 .51 4.911 6.051 6.051 0 0 0 6.515 2.9A5.985 5.985 0 0 0 13.26 24a6.056 6.056 0 0 0 5.772-4.206 5.99 5.99 0 0 0 3.997-2.9 6.056 6.056 0 0 0-.747-7.073zM13.26 22.43a4.476 4.476 0 0 1-2.876-1.04l.141-.081 4.779-2.758a.795.795 0 0 0 .392-.681v-6.737l2.02 1.168a.071.071 0 0 1 .038.052v5.583a4.504 4.504 0 0 1-4.494 4.494zM3.6 18.304a4.47 4.47 0 0 1-.535-3.014l.142.085 4.783 2.759a.771.771 0 0 0 .78 0l5.843-3.369v2.332a.08.08 0 0 1-.033.062L9.74 19.95a4.5 4.5 0 0 1-6.14-1.646zM2.34 7.896a4.485 4.485 0 0 1 2.366-1.973V11.6a.766.766 0 0 0 .388.676l5.815 3.355-2.02 1.168a.076.076 0 0 1-.071 0L4.1 14.05A4.5 4.5 0 0 1 2.34 7.896zm16.597 3.855l-5.843-3.372 2.02-1.164a.08.08 0 0 1 .071 0l4.722 2.724a4.498 4.498 0 0 1-.676 8.105v-5.678a.79.79 0 0 0-.394-.615zm2.01-3.023l-.141-.085-4.774-2.782a.776.776 0 0 0-.785 0L9.409 9.23V6.897a.066.066 0 0 1 .028-.061l4.716-2.72a4.498 4.498 0 0 1 6.675 4.66zm-12.64 4.135l-2.02-1.164a.08.08 0 0 1-.038-.057V6.075a4.5 4.5 0 0 1 7.375-3.453l-.142.08L8.704 5.46a.795.795 0 0 0-.393.681zm1.097-2.365l2.602-1.5 2.607 1.5v2.999l-2.597 1.5-2.607-1.5z"/></svg>`,
  netflix:`<svg viewBox="0 0 24 24" width="24" height="24" fill="white"><path d="M5.398 0v.006c3.028 8.556 5.37 15.175 8.348 23.596 2.344.058 4.85.398 4.854.398-2.8-7.924-5.923-16.747-8.487-24zm8.489 0v9.63L18.6 24c-.01-7.367-.003-15.726-.003-24zm-8.489 13.702v9.924c1.745-.012 3.43-.004 4.851-.004z"/></svg>`,
  steam:`<svg viewBox="0 0 24 24" width="26" height="26" fill="white"><path d="M11.979 0C5.678 0 .511 4.86.022 11.037l6.432 2.658c.545-.371 1.203-.59 1.912-.59.063 0 .125.004.188.006l2.861-4.142V8.91c0-2.495 2.028-4.524 4.524-4.524 2.494 0 4.524 2.029 4.524 4.524s-2.03 4.524-4.524 4.524h-.105l-4.076 2.911c0 .052.004.105.004.159 0 1.875-1.515 3.396-3.39 3.396-1.635 0-3.016-1.173-3.331-2.718L.436 15.27C1.862 20.307 6.486 24 11.979 24c6.627 0 11.999-5.373 11.999-12S18.606 0 11.979 0zM7.54 18.21l-1.473-.61c.262.543.714.999 1.314 1.25 1.297.539 2.793-.076 3.332-1.375.263-.63.264-1.319.005-1.949s-.75-1.121-1.377-1.383c-.624-.26-1.29-.249-1.878-.03l1.523.63c.956.4 1.409 1.5 1.009 2.455-.397.957-1.497 1.41-2.454 1.012H7.54zm11.415-9.303c0-1.662-1.353-3.015-3.015-3.015-1.665 0-3.015 1.353-3.015 3.015 0 1.665 1.35 3.015 3.015 3.015 1.662 0 3.015-1.35 3.015-3.015zm-5.273-.005c0-1.252 1.013-2.266 2.265-2.266 1.249 0 2.266 1.014 2.266 2.266 0 1.251-1.017 2.265-2.266 2.265-1.252 0-2.265-1.014-2.265-2.265z"/></svg>`,
  discord:`<svg viewBox="0 0 24 24" width="26" height="26" fill="white"><path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057.1 18.079.11 18.1.128 18.11a19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/></svg>`,
};

const SERVICES = [
  { id:1, name:'Spotify Premium', logo:'spotify', cat:'music', desc:'–ú—É–∑—ã–∫–∞ –±–µ–∑ —Ä–µ–∫–ª–∞–º—ã, —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ, –≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ', colorClass:'color-spotify',
    variants:[{id:1,dur:'1 –º–µ—Å—è—Ü',price:199},{id:2,dur:'3 –º–µ—Å—è—Ü–∞',price:549},{id:3,dur:'6 –º–µ—Å—è—Ü–µ–≤',price:999},{id:4,dur:'1 –≥–æ–¥',price:1799}] },
  { id:2, name:'Roblox', logo:'roblox', cat:'games', desc:'–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ Robux –ª—é–±–æ–π —Å—É–º–º–æ–π', colorClass:'color-roblox',
    variants:[{id:5,dur:'400 Robux',price:199},{id:6,dur:'800 Robux',price:369},{id:7,dur:'1700 Robux',price:749},{id:8,dur:'4500 Robux',price:1890}] },
  { id:7, name:'Brawl Stars', logo:'brawlstars', cat:'games', desc:'–ì–µ–º—ã –∏ Brawl Pass –¥–ª—è Brawl Stars', colorClass:'color-brawlstars',
    variants:[{id:18,dur:'30 –≥–µ–º–æ–≤',price:149},{id:19,dur:'80 –≥–µ–º–æ–≤',price:369},{id:20,dur:'170 –≥–µ–º–æ–≤',price:749},{id:21,dur:'Brawl Pass',price:299}] },
  { id:3, name:'ChatGPT Plus', logo:'chatgpt', cat:'ai', desc:'GPT-4, DALL-E, –∞–Ω–∞–ª–∏–∑ —Ñ–∞–π–ª–æ–≤, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø', colorClass:'color-chatgpt',
    variants:[{id:8,dur:'1 –º–µ—Å—è—Ü',price:1490},{id:9,dur:'3 –º–µ—Å—è—Ü–∞',price:3990}] },
  { id:4, name:'Netflix', logo:'netflix', cat:'video', desc:'–§–∏–ª—å–º—ã –∏ —Å–µ—Ä–∏–∞–ª—ã –≤ HD/4K –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π', colorClass:'color-netflix',
    variants:[{id:10,dur:'1 –º–µ—Å—è—Ü',price:599},{id:11,dur:'3 –º–µ—Å—è—Ü–∞',price:1599}] },
  { id:5, name:'Steam –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ', logo:'steam', cat:'games', desc:'–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞ Steam ‚Äî –≤–≤–µ–¥–∏ –ª—é–±—É—é —Å—É–º–º—É', colorClass:'color-steam',
    variants:[], custom:true },
  { id:6, name:'Discord Nitro', logo:'discord', cat:'games', desc:'–ö–∞—Å—Ç–æ–º–Ω—ã–π —Ç–µ–≥, —Å—Ç–∏–∫–µ—Ä—ã, –±—É—Å—Ç —Å–µ—Ä–≤–µ—Ä–∞, HD-–≤–∏–¥–µ–æ', colorClass:'color-discord',
    variants:[{id:15,dur:'1 –º–µ—Å—è—Ü',price:299},{id:16,dur:'3 –º–µ—Å—è—Ü–∞',price:799},{id:17,dur:'1 –≥–æ–¥',price:2799}] },
];

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// STATE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let selectedService = null;
let selectedVariant = null;
let currentCat = 'all';
let currentOrderId = null;
let sbpTimerInterval = null;

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// MODAL HELPERS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openModal(id) {
  document.getElementById(id).classList.add('open');
}
function closeModal(id) {
  document.getElementById(id).classList.remove('open');
}
function closeAllModals() {
  document.querySelectorAll('.modal-overlay').forEach(m => m.classList.remove('open'));
}

// –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –Ω–∞ —Ñ–æ–Ω
document.querySelectorAll('.modal-overlay').forEach(overlay => {
  overlay.addEventListener('click', e => {
    if (e.target === overlay) overlay.classList.remove('open');
  });
});

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// TOAST
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function showToast(msg = '‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!') {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2000);
}

function copyText(elemId) {
  const text = document.getElementById(elemId).textContent.trim();
  navigator.clipboard?.writeText(text).then(() => showToast('‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!'));
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// CATALOG RENDER
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderCatalog(cat = 'all') {
  const grid = document.getElementById('services-grid');
  const filtered = cat === 'all' ? SERVICES : SERVICES.filter(s => s.cat === cat);

  grid.innerHTML = filtered.map(svc => {
    const variantsHtml = svc.custom
      ? `<div class="custom-amount-wrap">
           <input class="custom-amount-input" type="number" min="100" max="50000"
             id="custom-input-${svc.id}" placeholder="–í–≤–µ–¥–∏ —Å—É–º–º—É..." />
           <span class="custom-amount-label">‚ÇΩ</span>
           <button class="btn-custom-select" onclick="selectCustomAmount(${svc.id})">–í—ã–±—Ä–∞—Ç—å ‚Üí</button>
         </div>`
      : svc.variants.map(v => `
          <div class="variant-chip"
            data-svc="${svc.id}" data-vid="${v.id}"
            data-price="${v.price}" data-name="${svc.name} ‚Äî ${v.dur}">
            ${v.dur} <span class="variant-price">${v.price}‚ÇΩ</span>
          </div>`).join('');

    return `
    <div class="service-card" data-id="${svc.id}">
      <div class="card-header">
        <div class="card-emoji ${svc.colorClass}">${LOGOS[svc.logo]}</div>
        <div class="card-info">
          <div class="card-name">${svc.name}</div>
          <div class="card-desc">${svc.desc}</div>
        </div>
        ${!svc.custom ? `<div class="card-price">
          <div class="price-from">–æ—Ç</div>
          <div class="price-value">${Math.min(...svc.variants.map(v=>v.price))}‚ÇΩ</div>
        </div>` : ''}
      </div>
      <div class="card-variants">${variantsHtml}</div>
    </div>`;
  }).join('');

  grid.querySelectorAll('.variant-chip').forEach(chip => {
    chip.addEventListener('click', e => {
      e.stopPropagation();
      const vid = +chip.dataset.vid;
      const svid = +chip.dataset.svc;
      grid.querySelectorAll('.variant-chip').forEach(c => c.classList.remove('selected'));
      if (selectedVariant?.id === vid) {
        selectedVariant = null; selectedService = null; hideBottomBar();
      } else {
        chip.classList.add('selected');
        selectedService = SERVICES.find(s => s.id === svid);
        selectedVariant = selectedService.variants.find(v => v.id === vid);
        showBottomBar(chip.dataset.name, chip.dataset.price);
      }
    });
  });
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// BOTTOM BAR
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function showBottomBar(name, price) {
  document.getElementById('bar-name').textContent = name;
  document.getElementById('bar-price').textContent = price + '‚ÇΩ';
  document.getElementById('bottom-bar').classList.add('visible');
  document.getElementById('main-nav').style.display = 'none';
}
function hideBottomBar() {
  document.getElementById('bottom-bar').classList.remove('visible');
  document.getElementById('main-nav').style.display = 'flex';
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// –û–§–û–†–ú–ò–¢–¨ –ó–ê–ö–ê–ó
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
document.getElementById('btn-order').addEventListener('click', () => {
  if (!selectedVariant) return;
  document.getElementById('pay-select-sub').textContent =
    `${selectedService.name} ‚Äî ${selectedVariant.dur} ¬∑ ${selectedVariant.price}‚ÇΩ`;
  openModal('modal-pay-select');
});

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// –û–ü–õ–ê–¢–ê –°–ë–ü
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
document.getElementById('pay-sbp-btn').addEventListener('click', () => {
  closeModal('modal-pay-select');

  // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞
  currentOrderId = Math.floor(10000 + Math.random() * 90000);

  document.getElementById('sbp-amount').textContent = selectedVariant.price + '‚ÇΩ';
  document.getElementById('sbp-phone').textContent = CONFIG.SBP_PHONE;
  document.getElementById('sbp-bank').textContent = CONFIG.SBP_BANK;
  document.getElementById('sbp-recipient').textContent = CONFIG.SBP_RECIPIENT;
  document.getElementById('sbp-comment').textContent = '#' + currentOrderId;

  startSbpTimer(15 * 60);
  openModal('modal-sbp');

  // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –±–æ—Ç—É –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞ –≤ –ë–î
  sendOrderToBot('sbp');
});

function startSbpTimer(seconds) {
  clearInterval(sbpTimerInterval);
  const el = document.getElementById('sbp-timer');
  let left = seconds;
  el.textContent = formatTime(left);
  sbpTimerInterval = setInterval(() => {
    left--;
    el.textContent = formatTime(left);
    if (left <= 0) {
      clearInterval(sbpTimerInterval);
      el.textContent = '00:00';
    }
  }, 1000);
}

function formatTime(s) {
  const m = Math.floor(s / 60);
  const sec = s % 60;
  return `${String(m).padStart(2,'0')}:${String(sec).padStart(2,'0')}`;
}

document.getElementById('sbp-paid-btn').addEventListener('click', () => {
  clearInterval(sbpTimerInterval);
  closeModal('modal-sbp');
  openModal('modal-waiting');

  // –ò–º–∏—Ç–∏—Ä—É–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É ‚Äî –≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –±–æ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –≤—Ä—É—á–Ω—É—é
  setTimeout(() => {
    closeModal('modal-waiting');
    document.getElementById('success-desc').innerHTML =
      `–û–ø–ª–∞—Ç–∞ –°–ë–ü –ø–æ–ª—É—á–µ–Ω–∞.<br>–î–∞–Ω–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏ –ø—Ä–∏–¥—É—Ç –≤ –±–æ—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ <strong>15 –º–∏–Ω—É—Ç</strong>.`;
    openModal('modal-success');
    // –£–≤–µ–¥–æ–º–ª—è–µ–º –±–æ—Ç–∞
    notifyBot('sbp_paid', currentOrderId);
  }, 2500);
});

document.getElementById('waiting-cancel-btn').addEventListener('click', () => {
  closeModal('modal-waiting');
});

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// –û–ü–õ–ê–¢–ê –ö–†–ò–ü–¢–ê
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
document.getElementById('pay-crypto-btn').addEventListener('click', () => {
  closeModal('modal-pay-select');

  currentOrderId = Math.floor(10000 + Math.random() * 90000);
  const usdt = (selectedVariant.price / CONFIG.USDT_RATE).toFixed(2);

  document.getElementById('crypto-amount-usdt').textContent = usdt + ' USDT';
  document.getElementById('crypto-amount-rub').textContent = '‚âà ' + selectedVariant.price + '‚ÇΩ';

  openModal('modal-crypto');
  sendOrderToBot('crypto');
});

document.getElementById('crypto-open-btn').addEventListener('click', () => {
  // –í —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ —Å—Å—ã–ª–∫–∞ –Ω–∞ –∏–Ω–≤–æ–π—Å –ø—Ä–∏–¥—ë—Ç –æ—Ç –±–æ—Ç–∞ —á–µ—Ä–µ–∑ tg.sendData
  // –ó–¥–µ—Å—å –æ—Ç–∫—Ä—ã–≤–∞–µ–º CryptoBot –Ω–∞–ø—Ä—è–º—É—é –∫–∞–∫ fallback
  window.open(CONFIG.CRYPTO_BOT_URL, '_blank');
});

document.getElementById('crypto-check-btn').addEventListener('click', () => {
  closeModal('modal-crypto');
  openModal('modal-waiting');

  setTimeout(() => {
    closeModal('modal-waiting');
    document.getElementById('success-desc').innerHTML =
      `–û–∂–∏–¥–∞–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–µ—Ç–∏.<br>–û–±—ã—á–Ω–æ –∑–∞–Ω–∏–º–∞–µ—Ç <strong>1‚Äì3 –º–∏–Ω—É—Ç—ã</strong>.`;
    openModal('modal-success');
    notifyBot('crypto_paid', currentOrderId);
  }, 3000);
});

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// –û–ü–õ–ê–¢–ê –ö–ê–†–¢–ê (–Æ–ö–ê–°–°–ê)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
document.getElementById('pay-card-btn').addEventListener('click', () => {
  closeModal('modal-pay-select');

  currentOrderId = Math.floor(10000 + Math.random() * 90000);
  document.getElementById('card-modal-sub').textContent =
    `${selectedService.name} ‚Äî ${selectedVariant.dur} ¬∑ ${selectedVariant.price}‚ÇΩ`;

  openModal('modal-card');
  sendOrderToBot('card');
});

document.getElementById('card-pay-btn').addEventListener('click', () => {
  // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –±–æ—Ç—É –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –Æ–ö–∞—Å—Å–∞
  // –ë–æ—Ç –æ—Ç–≤–µ—Ç–∏—Ç —á–µ—Ä–µ–∑ sendData —Å URL –¥–ª—è —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞
  notifyBot('yookassa_request', currentOrderId);

  closeModal('modal-card');
  openModal('modal-waiting');

  // –°–∏–º—É–ª—è—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Å—ã–ª–∫–∏ –æ—Ç –±–æ—Ç–∞
  setTimeout(() => {
    closeModal('modal-waiting');
    document.getElementById('success-desc').innerHTML =
      `–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–ø–ª–∞—Ç—ã –Æ–ö–∞—Å—Å–∞...`;
    openModal('modal-success');
    // –í –ø—Ä–æ–¥–∞–∫—à–Ω–µ –∑–¥–µ—Å—å –±—É–¥–µ—Ç: window.open(yookassaUrl, '_blank');
  }, 1500);
});

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// TELEGRAM COMMUNICATION
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function sendOrderToBot(payMethod) {
  const data = JSON.stringify({
    action: 'create_order',
    service_id: selectedService.id,
    variant_id: selectedVariant.id,
    service_name: selectedService.name,
    variant_dur: selectedVariant.dur,
    amount: selectedVariant.price,
    payment: payMethod,
    order_id: currentOrderId,
  });
  if (tg) tg.sendData(data);
}

function notifyBot(action, orderId) {
  const data = JSON.stringify({ action, order_id: orderId });
  if (tg) tg.sendData(data);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// CATEGORIES
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
document.querySelectorAll('.cat-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    currentCat = btn.dataset.cat;
    selectedVariant = null; selectedService = null;
    hideBottomBar();
    renderCatalog(currentCat);
  });
});

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// PAGES
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function showPage(page) {
  document.getElementById('page-catalog').classList.toggle('page-hidden', page !== 'catalog');
  document.getElementById('page-orders').classList.toggle('page-hidden', page !== 'orders');
  document.getElementById('nav-catalog').classList.toggle('active', page === 'catalog');
  document.getElementById('nav-orders').classList.toggle('active', page === 'orders');

  if (page === 'orders') {
    hideBottomBar();
    closeAllModals();
    renderOrders();
  } else {
    if (selectedVariant) showBottomBar(`${selectedService.name} ‚Äî ${selectedVariant.dur}`, selectedVariant.price);
  }
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ORDERS RENDER
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderOrders() {
  const cont = document.getElementById('orders-content');
  // –ó–∞–∫–∞–∑—ã –ø—Ä–∏—Ö–æ–¥—è—Ç –∏–∑ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ Telegram.WebApp.initData
  // –î–ª—è –¥–µ–º–æ ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—É—Å—Ç–æ–µ –∏–ª–∏ –ø—Ä–∏–º–µ—Ä
  const orders = window._orders || [];

  if (!orders.length) {
    cont.innerHTML = `
      <div class="empty-state">
        <div class="icon">üì¶</div>
        <div class="title">–ó–∞–∫–∞–∑–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</div>
        <div class="desc">–ü–µ—Ä–µ–π–¥–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥ –∏ –æ—Ñ–æ—Ä–º–∏ –ø–µ—Ä–≤—ã–π –∑–∞–∫–∞–∑</div>
      </div>`;
    return;
  }

  const statusMap = {
    completed: ['‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω','status-completed'],
    pending:   ['‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ','status-pending'],
    processing:['üîÑ –û–±—Ä–∞–±–æ—Ç–∫–∞','status-processing'],
    cancelled: ['‚ùå –û—Ç–º–µ–Ω—ë–Ω','status-cancelled'],
  };

  cont.innerHTML = `<div class="orders-list">${orders.map(o => {
    const [label, cls] = statusMap[o.status] || ['‚ùì',''];
    return `
      <div class="order-card">
        <div class="order-row">
          <div class="order-service">${o.service}</div>
          <span class="status-badge ${cls}">${label}</span>
        </div>
        <div class="order-row" style="margin-top:8px;">
          <div class="order-date">#${o.id} ¬∑ ${o.dur} ¬∑ ${o.date}</div>
          <div style="font-family:'Space Mono',monospace;font-size:15px;font-weight:700;">${o.price}‚ÇΩ</div>
        </div>
      </div>`;
  }).join('')}</div>`;
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// USER INFO
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
if (tg?.initDataUnsafe?.user) {
  const u = tg.initDataUnsafe.user;
  document.getElementById('user-badge').innerHTML = `
    <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.7 0 4.8-2.1 4.8-4.8S14.7 2.4 12 2.4 7.2 4.5 7.2 7.2 9.3 12 12 12zm0 2.4c-3.2 0-9.6 1.6-9.6 4.8v2.4h19.2v-2.4c0-3.2-6.4-4.8-9.6-4.8z"/></svg>
    ${u.first_name}`;
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// CUSTOM AMOUNT (Steam)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function selectCustomAmount(svcId) {
  const input = document.getElementById(`custom-input-${svcId}`);
  const val = parseInt(input.value);
  if (!val || val < 100) {
    input.style.borderColor = '#ff6584';
    input.placeholder = '–ú–∏–Ω–∏–º—É–º 100‚ÇΩ';
    setTimeout(() => { input.style.borderColor = ''; input.placeholder = '–í–≤–µ–¥–∏ —Å—É–º–º—É...'; }, 2000);
    return;
  }
  if (val > 50000) {
    input.style.borderColor = '#ff6584';
    input.placeholder = '–ú–∞–∫—Å–∏–º—É–º 50 000‚ÇΩ';
    setTimeout(() => { input.style.borderColor = ''; input.placeholder = '–í–≤–µ–¥–∏ —Å—É–º–º—É...'; }, 2000);
    return;
  }

  // –ù–∞—Ü–µ–Ω–∫–∞ 10% –∑–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é
  const price = Math.ceil(val * 1.1);
  const svc = SERVICES.find(s => s.id === svcId);

  // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –¥—Ä—É–≥–∏–µ –≤—ã–±–æ—Ä—ã
  document.querySelectorAll('.variant-chip').forEach(c => c.classList.remove('selected'));
  selectedService = svc;
  selectedVariant = { id: 9000 + svcId, dur: `${val}‚ÇΩ`, price };
  showBottomBar(`${svc.name} ‚Äî ${val}‚ÇΩ`, price);
  input.style.borderColor = 'var(--accent3)';
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// INIT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
renderCatalog();
</script>
</body>
</html>
