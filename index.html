<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>KeyFlow</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&family=Space+Mono:wght@400;700&display=swap');

  :root {
    --bg: #0a0a0f;
    --surface: #111118;
    --surface2: #1a1a24;
    --border: #2a2a3a;
    --accent: #6c63ff;
    --accent2: #ff6584;
    --accent3: #43e97b;
    --text: #f0f0ff;
    --text2: #8888aa;
    --text3: #5555770;
    --card-glow: rgba(108, 99, 255, 0.15);
    --radius: 18px;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

  body {
    font-family: 'Manrope', sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    overflow-x: hidden;
    padding-bottom: 80px;
  }

  /* Animated background */
  body::before {
    content: '';
    position: fixed;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: 
      radial-gradient(ellipse at 20% 20%, rgba(108,99,255,0.08) 0%, transparent 50%),
      radial-gradient(ellipse at 80% 80%, rgba(255,101,132,0.06) 0%, transparent 50%),
      radial-gradient(ellipse at 50% 50%, rgba(67,233,123,0.04) 0%, transparent 60%);
    pointer-events: none;
    z-index: 0;
  }

  .page { position: relative; z-index: 1; }

  /* ‚îÄ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ‚îÄ */
  .header {
    position: sticky;
    top: 0;
    z-index: 100;
    padding: 16px 20px 12px;
    background: rgba(10,10,15,0.85);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border-bottom: 1px solid var(--border);
  }

  .header-top {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 14px;
  }

  .logo {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .logo-icon {
    width: 40px;
    height: 40px;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    box-shadow: 0 4px 15px rgba(108,99,255,0.4);
  }

  .logo-text {
    font-size: 20px;
    font-weight: 800;
    background: linear-gradient(135deg, #fff, var(--accent));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    letter-spacing: -0.5px;
  }

  .user-badge {
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 20px;
    padding: 6px 12px;
    font-size: 13px;
    font-weight: 600;
    color: var(--text2);
    display: flex;
    align-items: center;
    gap: 6px;
  }

  /* Categories */
  .categories {
    display: flex;
    gap: 8px;
    overflow-x: auto;
    scrollbar-width: none;
    padding: 2px 0;
  }
  .categories::-webkit-scrollbar { display: none; }

  .cat-btn {
    flex-shrink: 0;
    padding: 7px 16px;
    border-radius: 20px;
    border: 1px solid var(--border);
    background: transparent;
    color: var(--text2);
    font-family: 'Manrope', sans-serif;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    white-space: nowrap;
  }

  .cat-btn.active {
    background: var(--accent);
    border-color: var(--accent);
    color: white;
    box-shadow: 0 4px 15px rgba(108,99,255,0.35);
  }

  /* ‚îÄ‚îÄ‚îÄ HERO BANNER ‚îÄ‚îÄ‚îÄ */
  .hero {
    margin: 20px 16px 0;
    background: linear-gradient(135deg, #1a1a35 0%, #0f0f20 100%);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 24px 20px;
    position: relative;
    overflow: hidden;
  }

  .hero::before {
    content: '';
    position: absolute;
    top: -40px; right: -40px;
    width: 160px; height: 160px;
    background: radial-gradient(circle, rgba(108,99,255,0.3) 0%, transparent 70%);
    border-radius: 50%;
  }

  .hero-badge {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    background: rgba(108,99,255,0.15);
    border: 1px solid rgba(108,99,255,0.3);
    border-radius: 20px;
    padding: 4px 12px;
    font-size: 12px;
    font-weight: 700;
    color: #a89cff;
    margin-bottom: 12px;
    letter-spacing: 0.5px;
    text-transform: uppercase;
  }

  .hero-title {
    font-size: 22px;
    font-weight: 800;
    line-height: 1.2;
    margin-bottom: 8px;
  }

  .hero-title span {
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .hero-sub {
    font-size: 14px;
    color: var(--text2);
    line-height: 1.5;
  }

  .hero-stats {
    display: flex;
    gap: 20px;
    margin-top: 20px;
    padding-top: 16px;
    border-top: 1px solid var(--border);
  }

  .stat {
    display: flex;
    flex-direction: column;
    gap: 2px;
  }

  .stat-num {
    font-size: 20px;
    font-weight: 800;
    font-family: 'Space Mono', monospace;
    color: var(--accent);
  }

  .stat-label {
    font-size: 11px;
    color: var(--text2);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  /* ‚îÄ‚îÄ‚îÄ SECTION ‚îÄ‚îÄ‚îÄ */
  .section-title {
    font-size: 18px;
    font-weight: 800;
    margin: 28px 16px 14px;
    display: flex;
    align-items: center;
    gap: 8px;
    color: var(--text);
  }

  .section-title::after {
    content: '';
    flex: 1;
    height: 1px;
    background: var(--border);
    margin-left: 8px;
  }

  /* ‚îÄ‚îÄ‚îÄ SERVICE CARDS ‚îÄ‚îÄ‚îÄ */
  .services-grid {
    padding: 0 16px;
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .service-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 18px;
    cursor: pointer;
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
  }

  .service-card::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, transparent, var(--card-glow));
    opacity: 0;
    transition: opacity 0.25s;
  }

  .service-card:active {
    transform: scale(0.98);
  }

  .service-card:active::before {
    opacity: 1;
  }

  .card-header {
    display: flex;
    align-items: center;
    gap: 14px;
    margin-bottom: 12px;
  }

  .card-emoji {
    width: 52px;
    height: 52px;
    border-radius: 14px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 26px;
    flex-shrink: 0;
  }

  .card-info { flex: 1; }

  .card-name {
    font-size: 16px;
    font-weight: 700;
    margin-bottom: 3px;
  }

  .card-desc {
    font-size: 13px;
    color: var(--text2);
    line-height: 1.4;
  }

  .card-price {
    text-align: right;
    flex-shrink: 0;
  }

  .price-from {
    font-size: 11px;
    color: var(--text2);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .price-value {
    font-size: 20px;
    font-weight: 800;
    font-family: 'Space Mono', monospace;
    color: var(--accent);
  }

  .card-variants {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
  }

  .variant-chip {
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 20px;
    padding: 6px 14px;
    font-size: 13px;
    font-weight: 600;
    color: var(--text2);
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .variant-chip:active, .variant-chip.selected {
    background: var(--accent);
    border-color: var(--accent);
    color: white;
  }

  .variant-price {
    font-family: 'Space Mono', monospace;
    font-size: 12px;
    opacity: 0.75;
  }

  /* ‚îÄ‚îÄ‚îÄ BOTTOM BAR ‚îÄ‚îÄ‚îÄ */
  .bottom-bar {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: rgba(10,10,15,0.95);
    backdrop-filter: blur(20px);
    border-top: 1px solid var(--border);
    padding: 12px 16px;
    z-index: 100;
    display: flex;
    gap: 10px;
    transform: translateY(100%);
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .bottom-bar.visible {
    transform: translateY(0);
  }

  .order-info {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
  }

  .order-name {
    font-size: 13px;
    color: var(--text2);
    font-weight: 600;
  }

  .order-total {
    font-size: 18px;
    font-weight: 800;
    font-family: 'Space Mono', monospace;
    color: var(--text);
  }

  .btn-order {
    background: linear-gradient(135deg, var(--accent), #8b5cf6);
    border: none;
    border-radius: 14px;
    padding: 14px 24px;
    font-family: 'Manrope', sans-serif;
    font-size: 15px;
    font-weight: 700;
    color: white;
    cursor: pointer;
    box-shadow: 0 4px 20px rgba(108,99,255,0.4);
    transition: all 0.2s;
    white-space: nowrap;
  }

  .btn-order:active {
    transform: scale(0.96);
    box-shadow: 0 2px 10px rgba(108,99,255,0.3);
  }

  /* ‚îÄ‚îÄ‚îÄ PAYMENT MODAL ‚îÄ‚îÄ‚îÄ */
  .modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.7);
    z-index: 200;
    display: flex;
    align-items: flex-end;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s;
  }

  .modal-overlay.open {
    opacity: 1;
    pointer-events: all;
  }

  .modal {
    background: var(--surface);
    border-radius: var(--radius) var(--radius) 0 0;
    border: 1px solid var(--border);
    border-bottom: none;
    padding: 8px 20px 32px;
    width: 100%;
    transform: translateY(100%);
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .modal-overlay.open .modal {
    transform: translateY(0);
  }

  .modal-handle {
    width: 36px;
    height: 4px;
    background: var(--border);
    border-radius: 2px;
    margin: 12px auto 20px;
  }

  .modal-title {
    font-size: 20px;
    font-weight: 800;
    margin-bottom: 6px;
  }

  .modal-sub {
    font-size: 14px;
    color: var(--text2);
    margin-bottom: 24px;
  }

  .payment-options {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .pay-btn {
    display: flex;
    align-items: center;
    gap: 14px;
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 16px;
    cursor: pointer;
    transition: all 0.2s;
    width: 100%;
    text-align: left;
  }

  .pay-btn:active {
    transform: scale(0.98);
    border-color: var(--accent);
    background: rgba(108,99,255,0.1);
  }

  .pay-icon {
    width: 44px;
    height: 44px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 22px;
    flex-shrink: 0;
  }

  .pay-info { flex: 1; }
  .pay-name { font-size: 15px; font-weight: 700; }
  .pay-desc { font-size: 13px; color: var(--text2); }
  .pay-arrow { font-size: 20px; color: var(--text2); }

  /* Colors per service */
  .color-spotify { background: #1DB954; }
  .color-youtube { background: #FF0000; }
  .color-chatgpt { background: #10a37f; }
  .color-netflix { background: #E50914; }
  .color-steam   { background: #1b2838; }
  .color-discord { background: #5865F2; }

  .card-emoji svg { display: block; }

  /* ‚îÄ‚îÄ‚îÄ ORDERS PAGE ‚îÄ‚îÄ‚îÄ */
  .orders-list { padding: 0 16px; display: flex; flex-direction: column; gap: 10px; }

  .order-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 16px;
  }

  .order-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .order-service { font-size: 15px; font-weight: 700; }
  .order-date { font-size: 12px; color: var(--text2); }

  .status-badge {
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 700;
  }

  .status-completed { background: rgba(67,233,123,0.15); color: var(--accent3); }
  .status-pending { background: rgba(255,193,7,0.15); color: #ffc107; }
  .status-processing { background: rgba(108,99,255,0.15); color: var(--accent); }
  .status-cancelled { background: rgba(255,101,132,0.15); color: var(--accent2); }

  /* ‚îÄ‚îÄ‚îÄ NAV ‚îÄ‚îÄ‚îÄ */
  .nav {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: rgba(10,10,15,0.95);
    backdrop-filter: blur(20px);
    border-top: 1px solid var(--border);
    display: flex;
    z-index: 99;
  }

  .nav-btn {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    padding: 10px 0 14px;
    background: none;
    border: none;
    cursor: pointer;
    color: var(--text2);
    font-family: 'Manrope', sans-serif;
    font-size: 11px;
    font-weight: 600;
    transition: color 0.2s;
  }

  .nav-btn svg { transition: transform 0.2s; }

  .nav-btn.active {
    color: var(--accent);
  }

  .nav-btn.active svg {
    transform: translateY(-1px);
  }

  /* ‚îÄ‚îÄ‚îÄ ANIMATIONS ‚îÄ‚îÄ‚îÄ */
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(16px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .service-card {
    animation: fadeIn 0.4s ease both;
  }

  .service-card:nth-child(1) { animation-delay: 0.05s; }
  .service-card:nth-child(2) { animation-delay: 0.1s; }
  .service-card:nth-child(3) { animation-delay: 0.15s; }
  .service-card:nth-child(4) { animation-delay: 0.2s; }
  .service-card:nth-child(5) { animation-delay: 0.25s; }

  .empty-state {
    text-align: center;
    padding: 60px 20px;
    color: var(--text2);
  }

  .empty-state .icon { font-size: 48px; margin-bottom: 12px; }
  .empty-state .title { font-size: 18px; font-weight: 700; color: var(--text); }
  .empty-state .desc { font-size: 14px; margin-top: 8px; }

  .page-hidden { display: none; }
</style>
</head>
<body>

<!-- ‚îÄ‚îÄ‚îÄ CATALOG PAGE ‚îÄ‚îÄ‚îÄ -->
<div id="page-catalog" class="page">
  <div class="header">
    <div class="header-top">
      <div class="logo">
        <div class="logo-icon">
          <svg width="22" height="22" viewBox="0 0 100 120" fill="none" xmlns="http://www.w3.org/2000/svg">
            <!-- Key shaft -->
            <line x1="50" y1="62" x2="50" y2="105" stroke="white" stroke-width="6" stroke-linecap="round"/>
            <!-- Key teeth -->
            <line x1="50" y1="82" x2="62" y2="82" stroke="white" stroke-width="6" stroke-linecap="round"/>
            <line x1="50" y1="95" x2="62" y2="95" stroke="white" stroke-width="6" stroke-linecap="round"/>
            <!-- Key head circle -->
            <circle cx="50" cy="42" r="20" stroke="white" stroke-width="6" fill="none"/>
            <!-- Wifi inside key head -->
            <path d="M44 46 Q50 40 56 46" stroke="white" stroke-width="3.5" stroke-linecap="round" fill="none"/>
            <path d="M40 50 Q50 36 60 50" stroke="white" stroke-width="3.5" stroke-linecap="round" fill="none"/>
            <circle cx="50" cy="49" r="2.5" fill="white"/>
            <!-- Orbit arc -->
            <path d="M20 28 Q18 10 50 8 Q82 6 82 30" stroke="white" stroke-width="4" stroke-linecap="round" fill="none" opacity="0.85"/>
            <!-- Arrow tip -->
            <polyline points="76,22 82,30 90,26" stroke="white" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" fill="none" opacity="0.85"/>
          </svg>
        </div>
        <div class="logo-text">KeyFlow</div>
      </div>
      <div class="user-badge" id="user-badge">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.7 0 4.8-2.1 4.8-4.8S14.7 2.4 12 2.4 7.2 4.5 7.2 7.2 9.3 12 12 12zm0 2.4c-3.2 0-9.6 1.6-9.6 4.8v2.4h19.2v-2.4c0-3.2-6.4-4.8-9.6-4.8z"/></svg>
        –ì–æ—Å—Ç—å
      </div>
    </div>
    <div class="categories">
      <button class="cat-btn active" data-cat="all">–í—Å–µ</button>
      <button class="cat-btn" data-cat="music">üéµ –ú—É–∑—ã–∫–∞</button>
      <button class="cat-btn" data-cat="video">üé¨ –í–∏–¥–µ–æ</button>
      <button class="cat-btn" data-cat="ai">ü§ñ –ò–ò</button>
      <button class="cat-btn" data-cat="games">üéÆ –ò–≥—Ä—ã</button>
    </div>
  </div>

  <div class="hero">
    <div class="hero-badge">‚ö° –ë—ã—Å—Ç—Ä–∞—è –≤—ã–¥–∞—á–∞</div>
    <div class="hero-title"><span>KeyFlow</span> ‚Äî –∑–∞—Ä—É–±–µ–∂–Ω—ã–µ<br>–ø–æ–¥–ø–∏—Å–∫–∏ –∏–∑ –†–æ—Å—Å–∏–∏</div>
    <div class="hero-sub">–û–ø–ª–∞—á–∏–≤–∞–π —á–µ—Ä–µ–∑ –°–ë–ü –∏–ª–∏ –∫—Ä–∏–ø—Ç—É ‚Äî –ø–æ–ª—É—á–∞–π –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ</div>
    <div class="hero-stats">
      <div class="stat">
        <div class="stat-num">1200+</div>
        <div class="stat-label">–ö–ª–∏–µ–Ω—Ç–æ–≤</div>
      </div>
      <div class="stat">
        <div class="stat-num">15–º–∏–Ω</div>
        <div class="stat-label">–í—ã–¥–∞—á–∞</div>
      </div>
      <div class="stat">
        <div class="stat-num">100%</div>
        <div class="stat-label">–ì–∞—Ä–∞–Ω—Ç–∏—è</div>
      </div>
    </div>
  </div>

  <div class="section-title">üî• –ü–æ–ø—É–ª—è—Ä–Ω–æ–µ</div>

  <div class="services-grid" id="services-grid">
    <!-- filled by JS -->
  </div>
</div>

<!-- ‚îÄ‚îÄ‚îÄ ORDERS PAGE ‚îÄ‚îÄ‚îÄ -->
<div id="page-orders" class="page page-hidden">
  <div class="header">
    <div class="header-top">
      <div class="logo">
        <div class="logo-icon">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="white"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14l-5-5 1.4-1.4L12 14.2l7.6-7.6L21 8l-9 9z"/></svg>
        </div>
        <div class="logo-text">–ú–æ–∏ –∑–∞–∫–∞–∑—ã</div>
      </div>
    </div>
  </div>
  <div id="orders-content" style="padding-top: 16px;"></div>
</div>

<!-- ‚îÄ‚îÄ‚îÄ BOTTOM ORDER BAR ‚îÄ‚îÄ‚îÄ -->
<div class="bottom-bar" id="bottom-bar">
  <div class="order-info">
    <div class="order-name" id="bar-name">–í—ã–±—Ä–∞–Ω–æ</div>
    <div class="order-total" id="bar-price">0‚ÇΩ</div>
  </div>
  <button class="btn-order" id="btn-order">–û—Ñ–æ—Ä–º–∏—Ç—å ‚Üí</button>
</div>

<!-- ‚îÄ‚îÄ‚îÄ PAYMENT MODAL ‚îÄ‚îÄ‚îÄ -->
<div class="modal-overlay" id="modal-overlay">
  <div class="modal">
    <div class="modal-handle"></div>
    <div class="modal-title">–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</div>
    <div class="modal-sub" id="modal-sub">–ó–∞–∫–∞–∑ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –≤ –±–æ—Ç–µ</div>
    <div class="payment-options">
      <button class="pay-btn" id="pay-sbp">
        <div class="pay-icon" style="background: linear-gradient(135deg, #2196f3, #1565c0);">üè¶</div>
        <div class="pay-info">
          <div class="pay-name">–°–ë–ü ‚Äî –ë—ã—Å—Ç—Ä—ã–π –ø–ª–∞—Ç—ë–∂</div>
          <div class="pay-desc">–¢–∏–Ω—å–∫–æ—Ñ—Ñ, –°–±–µ—Ä, –ª—é–±–æ–π –±–∞–Ω–∫</div>
        </div>
        <div class="pay-arrow">‚Ä∫</div>
      </button>
      <button class="pay-btn" id="pay-crypto">
        <div class="pay-icon" style="background: linear-gradient(135deg, #f7931a, #c67421);">üíé</div>
        <div class="pay-info">
          <div class="pay-name">–ö—Ä–∏–ø—Ç–∞ (USDT/TON)</div>
          <div class="pay-desc">CryptoBot ¬∑ –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ</div>
        </div>
        <div class="pay-arrow">‚Ä∫</div>
      </button>
    </div>
  </div>
</div>

<!-- ‚îÄ‚îÄ‚îÄ NAVIGATION ‚îÄ‚îÄ‚îÄ -->
<nav class="nav" id="main-nav">
  <button class="nav-btn active" id="nav-catalog" onclick="showPage('catalog')">
    <svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor"><path d="M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z"/></svg>
    –ö–∞—Ç–∞–ª–æ–≥
  </button>
  <button class="nav-btn" id="nav-orders" onclick="showPage('orders')">
    <svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14l-5-5 1.4-1.4L12 14.2l7.6-7.6L21 8l-9 9z"/></svg>
    –ó–∞–∫–∞–∑—ã
  </button>
</nav>

<script>
const tg = window.Telegram?.WebApp;
if (tg) {
  tg.ready();
  tg.expand();
  tg.setHeaderColor('#0a0a0f');
  tg.setBackgroundColor('#0a0a0f');
}

// ‚îÄ‚îÄ‚îÄ DATA ‚îÄ‚îÄ‚îÄ
// SVG logos
const LOGOS = {
  spotify: `<svg viewBox="0 0 24 24" width="28" height="28" fill="white"><path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"/></svg>`,

  youtube: `<svg viewBox="0 0 24 24" width="28" height="28" fill="white"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>`,

  chatgpt: `<svg viewBox="0 0 24 24" width="26" height="26" fill="white"><path d="M22.282 9.821a5.985 5.985 0 0 0-.516-4.91 6.046 6.046 0 0 0-6.51-2.9A6.065 6.065 0 0 0 4.981 4.18a5.985 5.985 0 0 0-3.998 2.9 6.046 6.046 0 0 0 .743 7.097 5.98 5.98 0 0 0 .51 4.911 6.051 6.051 0 0 0 6.515 2.9A5.985 5.985 0 0 0 13.26 24a6.056 6.056 0 0 0 5.772-4.206 5.99 5.99 0 0 0 3.997-2.9 6.056 6.056 0 0 0-.747-7.073zM13.26 22.43a4.476 4.476 0 0 1-2.876-1.04l.141-.081 4.779-2.758a.795.795 0 0 0 .392-.681v-6.737l2.02 1.168a.071.071 0 0 1 .038.052v5.583a4.504 4.504 0 0 1-4.494 4.494zM3.6 18.304a4.47 4.47 0 0 1-.535-3.014l.142.085 4.783 2.759a.771.771 0 0 0 .78 0l5.843-3.369v2.332a.08.08 0 0 1-.033.062L9.74 19.95a4.5 4.5 0 0 1-6.14-1.646zM2.34 7.896a4.485 4.485 0 0 1 2.366-1.973V11.6a.766.766 0 0 0 .388.676l5.815 3.355-2.02 1.168a.076.076 0 0 1-.071 0L4.1 14.05A4.5 4.5 0 0 1 2.34 7.896zm16.597 3.855l-5.843-3.372 2.02-1.164a.08.08 0 0 1 .071 0l4.722 2.724a4.498 4.498 0 0 1-.676 8.105v-5.678a.79.79 0 0 0-.394-.615zm2.01-3.023l-.141-.085-4.774-2.782a.776.776 0 0 0-.785 0L9.409 9.23V6.897a.066.066 0 0 1 .028-.061l4.716-2.72a4.498 4.498 0 0 1 6.675 4.66zm-12.64 4.135l-2.02-1.164a.08.08 0 0 1-.038-.057V6.075a4.5 4.5 0 0 1 7.375-3.453l-.142.08L8.704 5.46a.795.795 0 0 0-.393.681zm1.097-2.365l2.602-1.5 2.607 1.5v2.999l-2.597 1.5-2.607-1.5z"/></svg>`,

  netflix: `<svg viewBox="0 0 24 24" width="24" height="24" fill="white"><path d="M5.398 0v.006c3.028 8.556 5.37 15.175 8.348 23.596 2.344.058 4.85.398 4.854.398-2.8-7.924-5.923-16.747-8.487-24zm8.489 0v9.63L18.6 24c-.01-7.367-.003-15.726-.003-24zm-8.489 13.702v9.924c1.745-.012 3.43-.004 4.851-.004z"/></svg>`,

  steam: `<svg viewBox="0 0 24 24" width="26" height="26" fill="white"><path d="M11.979 0C5.678 0 .511 4.86.022 11.037l6.432 2.658c.545-.371 1.203-.59 1.912-.59.063 0 .125.004.188.006l2.861-4.142V8.91c0-2.495 2.028-4.524 4.524-4.524 2.494 0 4.524 2.029 4.524 4.524s-2.03 4.524-4.524 4.524h-.105l-4.076 2.911c0 .052.004.105.004.159 0 1.875-1.515 3.396-3.39 3.396-1.635 0-3.016-1.173-3.331-2.718L.436 15.27C1.862 20.307 6.486 24 11.979 24c6.627 0 11.999-5.373 11.999-12S18.606 0 11.979 0zM7.54 18.21l-1.473-.61c.262.543.714.999 1.314 1.25 1.297.539 2.793-.076 3.332-1.375.263-.63.264-1.319.005-1.949s-.75-1.121-1.377-1.383c-.624-.26-1.29-.249-1.878-.03l1.523.63c.956.4 1.409 1.5 1.009 2.455-.397.957-1.497 1.41-2.454 1.012H7.54zm11.415-9.303c0-1.662-1.353-3.015-3.015-3.015-1.665 0-3.015 1.353-3.015 3.015 0 1.665 1.35 3.015 3.015 3.015 1.662 0 3.015-1.35 3.015-3.015zm-5.273-.005c0-1.252 1.013-2.266 2.265-2.266 1.249 0 2.266 1.014 2.266 2.266 0 1.251-1.017 2.265-2.266 2.265-1.252 0-2.265-1.014-2.265-2.265z"/></svg>`,

  discord: `<svg viewBox="0 0 24 24" width="26" height="26" fill="white"><path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057.1 18.079.11 18.1.128 18.11a19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/></svg>`,
};

const SERVICES = [
  {
    id: 1, name: 'Spotify Premium', logo: 'spotify', cat: 'music',
    desc: '–ú—É–∑—ã–∫–∞ –±–µ–∑ —Ä–µ–∫–ª–∞–º—ã, —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ, –≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ',
    colorClass: 'color-spotify',
    variants: [
      { id: 1, dur: '1 –º–µ—Å—è—Ü', price: 199 },
      { id: 2, dur: '3 –º–µ—Å—è—Ü–∞', price: 549 },
      { id: 3, dur: '6 –º–µ—Å—è—Ü–µ–≤', price: 999 },
      { id: 4, dur: '1 –≥–æ–¥', price: 1799 },
    ]
  },
  {
    id: 2, name: 'YouTube Premium', logo: 'youtube', cat: 'video',
    desc: '–ë–µ–∑ —Ä–µ–∫–ª–∞–º—ã, —Ñ–æ–Ω–æ–≤–æ–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ, YouTube Music',
    colorClass: 'color-youtube',
    variants: [
      { id: 5, dur: '1 –º–µ—Å—è—Ü', price: 249 },
      { id: 6, dur: '3 –º–µ—Å—è—Ü–∞', price: 699 },
      { id: 7, dur: '1 –≥–æ–¥', price: 2499 },
    ]
  },
  {
    id: 3, name: 'ChatGPT Plus', logo: 'chatgpt', cat: 'ai',
    desc: 'GPT-4, DALL-E, –∞–Ω–∞–ª–∏–∑ —Ñ–∞–π–ª–æ–≤, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø',
    colorClass: 'color-chatgpt',
    variants: [
      { id: 8, dur: '1 –º–µ—Å—è—Ü', price: 1490 },
      { id: 9, dur: '3 –º–µ—Å—è—Ü–∞', price: 3990 },
    ]
  },
  {
    id: 4, name: 'Netflix', logo: 'netflix', cat: 'video',
    desc: '–§–∏–ª—å–º—ã –∏ —Å–µ—Ä–∏–∞–ª—ã –≤ HD/4K –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π',
    colorClass: 'color-netflix',
    variants: [
      { id: 10, dur: '1 –º–µ—Å—è—Ü', price: 599 },
      { id: 11, dur: '3 –º–µ—Å—è—Ü–∞', price: 1599 },
    ]
  },
  {
    id: 5, name: 'Steam –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ', logo: 'steam', cat: 'games',
    desc: '–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞ Steam –ª—é–±–æ–π —Å—É–º–º–æ–π',
    colorClass: 'color-steam',
    variants: [
      { id: 12, dur: '500‚ÇΩ', price: 550 },
      { id: 13, dur: '1000‚ÇΩ', price: 1090 },
      { id: 14, dur: '2000‚ÇΩ', price: 2100 },
    ]
  },
  {
    id: 6, name: 'Discord Nitro', logo: 'discord', cat: 'games',
    desc: '–ö–∞—Å—Ç–æ–º–Ω—ã–π —Ç–µ–≥, —Å—Ç–∏–∫–µ—Ä—ã, –±—É—Å—Ç —Å–µ—Ä–≤–µ—Ä–∞, HD-–≤–∏–¥–µ–æ',
    colorClass: 'color-discord',
    variants: [
      { id: 15, dur: '1 –º–µ—Å—è—Ü', price: 299 },
      { id: 16, dur: '3 –º–µ—Å—è—Ü–∞', price: 799 },
      { id: 17, dur: '1 –≥–æ–¥', price: 2799 },
    ]
  },
];

let selectedService = null;
let selectedVariant = null;
let currentCat = 'all';

// ‚îÄ‚îÄ‚îÄ RENDER CATALOG ‚îÄ‚îÄ‚îÄ
function renderCatalog(cat = 'all') {
  const grid = document.getElementById('services-grid');
  const filtered = cat === 'all' ? SERVICES : SERVICES.filter(s => s.cat === cat);

  grid.innerHTML = filtered.map(svc => `
    <div class="service-card" data-id="${svc.id}">
      <div class="card-header">
        <div class="card-emoji ${svc.colorClass}">${LOGOS[svc.logo]}</div>
        <div class="card-info">
          <div class="card-name">${svc.name}</div>
          <div class="card-desc">${svc.desc}</div>
        </div>
        <div class="card-price">
          <div class="price-from">–æ—Ç</div>
          <div class="price-value">${Math.min(...svc.variants.map(v=>v.price))}‚ÇΩ</div>
        </div>
      </div>
      <div class="card-variants">
        ${svc.variants.map(v => `
          <div class="variant-chip" data-svc="${svc.id}" data-vid="${v.id}" data-price="${v.price}" data-name="${svc.name} ‚Äî ${v.dur}">
            ${v.dur} <span class="variant-price">${v.price}‚ÇΩ</span>
          </div>
        `).join('')}
      </div>
    </div>
  `).join('');

  // Bind variant clicks
  grid.querySelectorAll('.variant-chip').forEach(chip => {
    chip.addEventListener('click', (e) => {
      e.stopPropagation();
      const vid = +chip.dataset.vid;
      const svid = +chip.dataset.svc;

      // Deselect all
      grid.querySelectorAll('.variant-chip').forEach(c => c.classList.remove('selected'));

      if (selectedVariant?.id === vid) {
        selectedVariant = null;
        selectedService = null;
        hideBottomBar();
      } else {
        chip.classList.add('selected');
        selectedService = SERVICES.find(s => s.id === svid);
        selectedVariant = selectedService.variants.find(v => v.id === vid);
        showBottomBar(chip.dataset.name, chip.dataset.price);
      }
    });
  });
}

// ‚îÄ‚îÄ‚îÄ BOTTOM BAR ‚îÄ‚îÄ‚îÄ
function showBottomBar(name, price) {
  document.getElementById('bar-name').textContent = name;
  document.getElementById('bar-price').textContent = price + '‚ÇΩ';
  document.getElementById('bottom-bar').classList.add('visible');
  document.getElementById('main-nav').style.display = 'none';
}

function hideBottomBar() {
  document.getElementById('bottom-bar').classList.remove('visible');
  document.getElementById('main-nav').style.display = 'flex';
}

// ‚îÄ‚îÄ‚îÄ MODAL ‚îÄ‚îÄ‚îÄ
document.getElementById('btn-order').addEventListener('click', () => {
  if (!selectedVariant) return;
  document.getElementById('modal-sub').textContent =
    `${selectedService.name} ‚Äî ${selectedVariant.dur} ¬∑ ${selectedVariant.price}‚ÇΩ`;
  document.getElementById('modal-overlay').classList.add('open');
});

document.getElementById('modal-overlay').addEventListener('click', (e) => {
  if (e.target === document.getElementById('modal-overlay')) {
    document.getElementById('modal-overlay').classList.remove('open');
  }
});

// ‚îÄ‚îÄ‚îÄ PAYMENT ‚îÄ‚îÄ‚îÄ
function sendToBot(method) {
  document.getElementById('modal-overlay').classList.remove('open');

  const data = JSON.stringify({
    action: 'order',
    service_id: selectedService.id,
    variant_id: selectedVariant.id,
    payment: method
  });

  if (tg) {
    tg.sendData(data);
  } else {
    alert(`–ó–∞–∫–∞–∑: ${selectedService.name}\n–°–ø–æ—Å–æ–±: ${method}\n–¶–µ–Ω–∞: ${selectedVariant.price}‚ÇΩ\n\n(–û—Ç–∫—Ä–æ–π—Ç–µ —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞)`);
  }
}

document.getElementById('pay-sbp').addEventListener('click', () => sendToBot('sbp'));
document.getElementById('pay-crypto').addEventListener('click', () => sendToBot('crypto'));

// ‚îÄ‚îÄ‚îÄ CATEGORIES ‚îÄ‚îÄ‚îÄ
document.querySelectorAll('.cat-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    currentCat = btn.dataset.cat;
    selectedVariant = null;
    selectedService = null;
    hideBottomBar();
    renderCatalog(currentCat);
  });
});

// ‚îÄ‚îÄ‚îÄ PAGES ‚îÄ‚îÄ‚îÄ
function showPage(page) {
  document.getElementById('page-catalog').classList.toggle('page-hidden', page !== 'catalog');
  document.getElementById('page-orders').classList.toggle('page-hidden', page !== 'orders');
  document.getElementById('nav-catalog').classList.toggle('active', page === 'catalog');
  document.getElementById('nav-orders').classList.toggle('active', page === 'orders');

  if (page === 'orders') {
    hideBottomBar();
    renderOrders();
  } else {
    if (selectedVariant) showBottomBar(
      `${selectedService.name} ‚Äî ${selectedVariant.dur}`, selectedVariant.price
    );
  }
}

function renderOrders() {
  const cont = document.getElementById('orders-content');
  // –í —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ ‚Äî –∑–∞–≥—Ä—É–∂–∞–π —Å –±—ç–∫–µ–Ω–¥–∞ —á–µ—Ä–µ–∑ fetch
  const mockOrders = [
    { id: 101, service: 'Spotify Premium', dur: '1 –º–µ—Å—è—Ü', price: 199, status: 'completed', date: '20.02.2026' },
    { id: 98, service: 'ChatGPT Plus', dur: '1 –º–µ—Å—è—Ü', price: 1490, status: 'processing', date: '19.02.2026' },
  ];

  const statusMap = {
    completed: ['‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω', 'status-completed'],
    pending: ['‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ', 'status-pending'],
    processing: ['üîÑ –û–±—Ä–∞–±–æ—Ç–∫–∞', 'status-processing'],
    cancelled: ['‚ùå –û—Ç–º–µ–Ω—ë–Ω', 'status-cancelled'],
  };

  if (!mockOrders.length) {
    cont.innerHTML = `<div class="empty-state"><div class="icon">üì¶</div><div class="title">–ù–µ—Ç –∑–∞–∫–∞–∑–æ–≤</div><div class="desc">–ü–µ—Ä–µ–π–¥–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥ –∏ –æ—Ñ–æ—Ä–º–∏ –ø–µ—Ä–≤—ã–π</div></div>`;
    return;
  }

  cont.innerHTML = `
    <div class="orders-list">
      ${mockOrders.map(o => {
        const [sLabel, sClass] = statusMap[o.status] || ['–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ', ''];
        return `
          <div class="order-card">
            <div class="order-row">
              <div class="order-service">${o.service}</div>
              <span class="status-badge ${sClass}">${sLabel}</span>
            </div>
            <div class="order-row" style="margin-top:8px;">
              <div class="order-date">#${o.id} ¬∑ ${o.dur} ¬∑ ${o.date}</div>
              <div style="font-family:'Space Mono',monospace;font-size:15px;font-weight:700;">${o.price}‚ÇΩ</div>
            </div>
          </div>
        `;
      }).join('')}
    </div>
  `;
}

// ‚îÄ‚îÄ‚îÄ USER INFO ‚îÄ‚îÄ‚îÄ
if (tg?.initDataUnsafe?.user) {
  const u = tg.initDataUnsafe.user;
  document.getElementById('user-badge').innerHTML = `
    <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.7 0 4.8-2.1 4.8-4.8S14.7 2.4 12 2.4 7.2 4.5 7.2 7.2 9.3 12 12 12zm0 2.4c-3.2 0-9.6 1.6-9.6 4.8v2.4h19.2v-2.4c0-3.2-6.4-4.8-9.6-4.8z"/></svg>
    ${u.first_name}
  `;
}

// ‚îÄ‚îÄ‚îÄ INIT ‚îÄ‚îÄ‚îÄ
renderCatalog();
</script>
</body>
</html>
